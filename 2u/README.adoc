2u-nix
======

Nix derivations for working at 2u.

Installation
------------

1. https://nixos.org/nix/download.html[Install Nix]
2. Install https://github.com/LnL7/nix-darwin[nix-darwin]
3. Clone this repo to somewhere.  If you have your machine configuration
   checked into source control, add this repository as a submodule.
4. Update your machine configuration to import these modules:

[source,nix]
----
{ config, pkgs, ... }:

{
  imports = [ ./path/to/2u-nix/darwin ];

  # ... rest of configuration ...
}
----

Configuration Options
---------------------

:services."2u".vault.enable _bool_:
    If true, vault is installed and configured to use `vault.prod.2u.com`
    with the correct certificate.  After running `darwin-rebuild switch`,
    you will need to log out and back in (or see below).

Logging Out and Back In
-----------------------

If logging out and back in is terrible and you need to reload your system's
shell environment:

[source,sh]
----
$ unset __NIX_DARWIN_SET_ENVIRONMENT_DONE
$ exec bash -l
----
